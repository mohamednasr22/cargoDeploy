(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"9N29":function(t,e,a){"use strict";a.r(e),a.d(e,"UserModule",function(){return W});var n=a("SVse"),i=a("iInd"),o=a("OaSA"),r=a("AXEG"),c=a("8Y7J"),s=a("iELJ"),b=a("ej43"),d=a("Tj54"),l=a("SqCe"),m=a("Dxy4"),u=a("jsAG");function p(t,e){1&t&&(c.Ub(0,"th",16),c.Mc(1," Name "),c.Tb())}function f(t,e){if(1&t&&(c.Ub(0,"td",17),c.Mc(1),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.Pc(" ",t.firstname," ",t.lastname," ")}}function g(t,e){1&t&&(c.Ub(0,"th",16),c.Mc(1," Update "),c.Tb())}const h=function(t){return["/admin/users/",t]};function U(t,e){if(1&t&&(c.Ub(0,"td",17),c.Ub(1,"button",18),c.Ub(2,"mat-icon",1),c.Mc(3,"edit"),c.Tb(),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.Cb(1),c.oc("routerLink",c.sc(1,h,t.user_id))}}function T(t,e){1&t&&(c.Ub(0,"th",16),c.Mc(1," Delete "),c.Tb())}function M(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",17),c.Ub(1,"button",19),c.cc("click",function(){c.Ac(t);const a=e.$implicit;return c.gc(2).delete(a.user_id)}),c.Ub(2,"mat-icon",1),c.Mc(3,"delete"),c.Tb(),c.Tb(),c.Tb()}}function C(t,e){1&t&&c.Pb(0,"tr",20)}function _(t,e){1&t&&c.Pb(0,"tr",21)}function w(t,e){if(1&t&&(c.Ub(0,"div",7),c.Ub(1,"table",8),c.Sb(2,9),c.Kc(3,p,2,0,"th",10),c.Kc(4,f,2,2,"td",11),c.Rb(),c.Sb(5,12),c.Kc(6,g,2,0,"th",10),c.Kc(7,U,4,3,"td",11),c.Rb(),c.Sb(8,13),c.Kc(9,T,2,0,"th",10),c.Kc(10,M,4,0,"td",11),c.Rb(),c.Kc(11,C,1,0,"tr",14),c.Kc(12,_,1,0,"tr",15),c.Tb(),c.Tb()),2&t){const t=c.gc();c.Cb(1),c.oc("dataSource",t.dataSource),c.Cb(10),c.oc("matHeaderRowDef",t.displayedColumns),c.Cb(1),c.oc("matRowDefColumns",t.displayedColumns)}}function v(t,e){1&t&&c.Pb(0,"app-skeleton",22)}let O=(()=>{class t{constructor(t,e){this.dialog=t,this.auths=e,this.displayedColumns=["name","update","delete"],this.dataSource=new o.o,this.loaded=!1,this.auths.getUsers().subscribe(t=>{t&&t.data&&(this.dataSource.data=t.data),this.loaded=!0},t=>{this.loaded=!0})}ngOnInit(){}delete(t){this.dialog.open(r.a,{data:{title:"Are you sure?",id:t}}).afterClosed().subscribe(t=>{if(t){const e=new FormData;e.append("user_id",t),this.auths.deleteUser(e).subscribe(e=>{this.dataSource.data=this.dataSource.data.filter(e=>e.user_id!=t)})}})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(s.b),c.Ob(b.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-users"]],decls:14,vars:3,consts:[[1,"cs-page-header"],["mat-list-icon",""],[1,"cs-right"],["mat-flat-button","",3,"routerLink"],[1,"cs-box"],["class","mat-elevation-z8",4,"ngIf","ngIfElse"],["rowsPlaceHolder",""],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","update"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["mat-icon-button","","aria-label","Edit",3,"click"],["mat-header-row",""],["mat-row",""],["type","rows"]],template:function(t,e){if(1&t&&(c.Ub(0,"div",0),c.Ub(1,"span"),c.Ub(2,"mat-icon",1),c.Mc(3,"view_quilt"),c.Tb(),c.Mc(4," Users"),c.Tb(),c.Ub(5,"div",2),c.Ub(6,"a",3),c.Ub(7,"mat-icon",1),c.Mc(8,"add_circle_outline"),c.Tb(),c.Mc(9," Add New "),c.Tb(),c.Tb(),c.Tb(),c.Ub(10,"div",4),c.Kc(11,w,13,3,"div",5),c.Tb(),c.Kc(12,v,1,0,"ng-template",null,6,c.Lc)),2&t){const t=c.xc(13);c.Cb(6),c.oc("routerLink","/admin/users/add"),c.Cb(5),c.oc("ngIf",e.loaded)("ngIfElse",t)}},directives:[d.a,l.b,m.a,i.h,n.l,o.n,o.c,o.i,o.b,o.k,o.m,o.h,o.a,m.b,i.f,o.j,o.l,u.a],styles:[".cs-box[_ngcontent-%COMP%]{display:inline-block;padding:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);background:#fff}.cs-box[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-delete[_ngcontent-%COMP%], .mat-column-update[_ngcontent-%COMP%]{width:56px;text-align:center!important}.mat-column-delete[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ea4141}.mat-column-update[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2ba7ff}.filter-btn[_ngcontent-%COMP%]{display:inline-block;width:110px}.filter-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{padding:0 0 20px;margin-right:20px}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-infix{padding:13px 0}"]}),t})();var P=a("s7LF"),y=a("IheW"),x=a("zHaW"),I=a("PDjf"),k=a("Q2Ze"),F=a("e6WT"),D=a("ZTz/"),S=a("UhP/");function N(t,e){1&t&&(c.Ub(0,"span"),c.Ub(1,"mat-icon",4),c.Mc(2,"add"),c.Tb(),c.Mc(3," Create User"),c.Tb())}function K(t,e){1&t&&(c.Ub(0,"span"),c.Ub(1,"mat-icon",4),c.Mc(2,"edit"),c.Tb(),c.Mc(3," Edit User"),c.Tb())}function A(t,e){if(1&t&&(c.Ub(0,"mat-option",15),c.Mc(1),c.Tb()),2&t){const t=e.$implicit;c.oc("value",t.user_group_id),c.Cb(1),c.Oc(" ",t.name," ")}}function j(t,e){if(1&t&&c.Pb(0,"img",27),2&t){const t=c.gc();c.oc("src",t.dataForm.controls.image.value,c.Dc)}}function L(t,e){if(1&t){const t=c.Vb();c.Ub(0,"li"),c.Ub(1,"span"),c.Mc(2),c.Tb(),c.Ub(3,"span"),c.Ub(4,"button",32),c.cc("click",function(){c.Ac(t);const a=e.$implicit;return c.gc(2).download(a)}),c.Ub(5,"mat-icon"),c.Mc(6,"attachment"),c.Tb(),c.Tb(),c.Ub(7,"button",33),c.cc("click",function(){c.Ac(t);const a=e.$implicit;return c.gc(2).delete(a.file_id)}),c.Ub(8,"mat-icon"),c.Mc(9,"delete"),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Nc(t.name)}}function E(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-card",7),c.Ub(1,"mat-card-header"),c.Ub(2,"mat-card-title"),c.Mc(3,"User Files"),c.Tb(),c.Tb(),c.Ub(4,"mat-card-content"),c.Ub(5,"ul",28),c.Kc(6,L,10,1,"li",29),c.Tb(),c.Ub(7,"div"),c.Ub(8,"label",30),c.Ub(9,"mat-icon",4),c.Mc(10,"add"),c.Tb(),c.Mc(11," Add New Attachment "),c.Tb(),c.Ub(12,"input",31),c.cc("change",function(e){return c.Ac(t),c.gc().onFileChange(e)}),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=c.gc();c.Cb(6),c.oc("ngForOf",t.files)}}function $(t,e){1&t&&(c.Ub(0,"button",34),c.Ub(1,"span"),c.Mc(2,"Wait"),c.Tb(),c.Tb())}function q(t,e){1&t&&(c.Ub(0,"span"),c.Mc(1,"Submit"),c.Tb())}function B(t,e){1&t&&(c.Ub(0,"span"),c.Mc(1,"Update"),c.Tb())}function R(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",35),c.cc("click",function(){return c.Ac(t),c.gc().submitForm()}),c.Kc(1,q,2,0,"span",1),c.Kc(2,B,2,0,"span",1),c.Tb()}if(2&t){const t=c.gc();c.oc("disabled",!t.dataForm.valid),c.Cb(1),c.oc("ngIf",!t.editMode),c.Cb(1),c.oc("ngIf",t.editMode)}}let V=(()=>{class t{constructor(t,e,a,n,i,o){this._snackBar=t,this.router=e,this.dialog=a,this.route=n,this.fb=i,this.auths=o,this.submitted=!1,this.files=[],this.groups=[],this.percentCompleted=0,this.isUploaded=!1,this.editMode=!1}ngOnInit(){this.resetForm(),this.auths.getGroups().subscribe(t=>{t&&(this.groups=t.data)}),this.sub=this.route.params.subscribe(t=>{this.userId=+t.id,isNaN(this.userId)?(this.editMode=!1,this.userId=null,this.resetForm()):(this.editMode=!0,this.getUser(this.userId))})}resetForm(){this.dataForm=this.fb.group({firstname:["",P.v.required],lastname:["",P.v.required],phone:["",P.v.required],email:["",[P.v.required,P.v.email]],user_group_id:["",P.v.required],image:[""],approved:[""],signature:[""],file:[""],password:[""],confirmpassword:[""]},{validator:this.MustMatch("password","confirmpassword")})}MustMatch(t,e){return a=>{const n=a.controls[e];n.errors&&!n.errors.mustMatch||n.setErrors(a.controls[t].value!==n.value?{mustMatch:!0}:null)}}onFileChange(t){if(this.userId){let e=t.target,a=e.files[0],n=new FormData;n.append("user_id",this.userId.toString()),n.append("file",a),this.auths.addUserFile(n).subscribe(t=>{t.type===y.d.UploadProgress||t instanceof y.e&&(this.openSnackBar("File Uploaded successfully",""),e.value="",t.body.data&&this.files.push(t.body.data))},t=>{this.openSnackBar("Something wrong happen!",""),e.value=""})}}download(t){var e=document.createElement("a");e.download=t.name,e.href=t.file,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}getUser(t){const e=new FormData;e.append("user_id",t),this.auths.getUser(e).subscribe(t=>{if(t&&t.data){const e=t.data;this.files=t.files,this.dataForm.patchValue({firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email,image:e.image,approved:+e.approved,signature:+e.signature,user_group_id:e.user_group_id})}})}onImageChange(t){this.dataForm.get("file").setValue(t.target.files[0])}submitForm(){this.submitted=!0;let t=new FormData,e=JSON.parse(JSON.stringify(this.dataForm.value));e.file=this.dataForm.get("file").value,this.jsonToFormData(t,e),this.userId&&t.append("user_id",this.userId.toString()),this.auths.saveUser(t).subscribe(t=>{t.type===y.d.UploadProgress?this.percentCompleted=Math.round(100*t.loaded/t.total):t instanceof y.e&&(this.isUploaded=!0,this.submitted=!1,this.openSnackBar("Data submited successfully",""),this.router.navigate(["/admin/users/list"]),console.log("success"))},t=>{this.submitted=!1,this.openSnackBar("Something wrong happen!",""),this.router.navigate(["/admin/users/list"]),console.log("error")})}buildFormData(t,e,a){!e||"object"!=typeof e||e instanceof Date||e instanceof File?t.append(a,null==e?"":e):Object.keys(e).forEach(n=>{this.buildFormData(t,e[n],a?`${a}[${n}]`:n)})}jsonToFormData(t,e){this.buildFormData(t,e,"")}openSnackBar(t,e){this._snackBar.open(t,e,{duration:2e3})}delete(t){this.dialog.open(r.a,{data:{title:"Are you sure?",id:t}}).afterClosed().subscribe(t=>{if(t){const e=new FormData;e.append("file_id",t),e.append("user_id",this.userId.toString()),this.auths.deleteUserFile(e).subscribe(e=>{this.files=this.files.filter(e=>e.file_id!=t)})}})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(x.a),c.Ob(i.e),c.Ob(s.b),c.Ob(i.a),c.Ob(P.f),c.Ob(b.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-createuser"]],decls:72,vars:13,consts:[[1,"cs-page-header"],[4,"ngIf"],[1,"cs-right"],["mat-flat-button","",3,"routerLink"],["mat-list-icon",""],[1,"cs-box",3,"formGroup"],[1,"col"],[1,"cs-card"],["type","text","matInput","","formControlName","firstname"],["type","text","matInput","","formControlName","lastname"],["type","text","matInput","","formControlName","email"],["type","text","matInput","","formControlName","phone"],["formControlName","user_group_id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","signature"],[3,"value"],["formControlName","approved"],["type","text","matInput","","formControlName","password"],["type","text","matInput","","formControlName","confirmpassword"],["class","profile_image",3,"src",4,"ngIf"],[1,"fupload"],["for","ifile"],["type","file","id","ifile","accept",".png, .jpg, .jpeg",3,"change"],["class","cs-card",4,"ngIf"],[1,"form-add"],["mat-raised-button","","color","warn","disabled","",4,"ngIf"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],[1,"profile_image",3,"src"],[1,"flist"],[4,"ngFor","ngForOf"],["for","inp_file",1,"cs-dlnk2"],["type","file","id","inp_file",2,"display","none",3,"change"],["mat-icon-button","","color","primary","aria-label","Download",3,"click"],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"],["mat-raised-button","","color","warn","disabled",""],["mat-raised-button","","color","warn",3,"disabled","click"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Kc(1,N,4,0,"span",1),c.Kc(2,K,4,0,"span",1),c.Ub(3,"div",2),c.Ub(4,"a",3),c.Ub(5,"mat-icon",4),c.Mc(6,"keyboard_arrow_left"),c.Tb(),c.Mc(7," Back "),c.Tb(),c.Tb(),c.Tb(),c.Ub(8,"form",5),c.Ub(9,"div",6),c.Ub(10,"mat-card",7),c.Ub(11,"mat-card-header"),c.Ub(12,"mat-card-title"),c.Mc(13,"User Information"),c.Tb(),c.Tb(),c.Ub(14,"mat-card-content"),c.Ub(15,"mat-form-field"),c.Ub(16,"mat-label"),c.Mc(17,"First Name"),c.Tb(),c.Pb(18,"input",8),c.Tb(),c.Ub(19,"mat-form-field"),c.Ub(20,"mat-label"),c.Mc(21,"Last Name"),c.Tb(),c.Pb(22,"input",9),c.Tb(),c.Ub(23,"mat-form-field"),c.Ub(24,"mat-label"),c.Mc(25,"Email"),c.Tb(),c.Pb(26,"input",10),c.Tb(),c.Ub(27,"mat-form-field"),c.Ub(28,"mat-label"),c.Mc(29,"Phone"),c.Tb(),c.Pb(30,"input",11),c.Tb(),c.Ub(31,"mat-form-field"),c.Ub(32,"mat-label"),c.Mc(33,"Type"),c.Tb(),c.Ub(34,"mat-select",12),c.Kc(35,A,2,2,"mat-option",13),c.Tb(),c.Tb(),c.Ub(36,"mat-form-field"),c.Ub(37,"mat-label"),c.Mc(38,"Manager Signature"),c.Tb(),c.Ub(39,"mat-select",14),c.Ub(40,"mat-option",15),c.Mc(41,"Yes"),c.Tb(),c.Ub(42,"mat-option",15),c.Mc(43,"No"),c.Tb(),c.Tb(),c.Tb(),c.Ub(44,"mat-form-field"),c.Ub(45,"mat-label"),c.Mc(46,"Approved"),c.Tb(),c.Ub(47,"mat-select",16),c.Ub(48,"mat-option",15),c.Mc(49,"Yes"),c.Tb(),c.Ub(50,"mat-option",15),c.Mc(51,"No"),c.Tb(),c.Tb(),c.Tb(),c.Ub(52,"mat-form-field"),c.Ub(53,"mat-label"),c.Mc(54,"Password"),c.Tb(),c.Pb(55,"input",17),c.Tb(),c.Ub(56,"mat-form-field"),c.Ub(57,"mat-label"),c.Mc(58,"Confirm Password"),c.Tb(),c.Pb(59,"input",18),c.Tb(),c.Ub(60,"div"),c.Ub(61,"div"),c.Kc(62,j,1,1,"img",19),c.Tb(),c.Ub(63,"div",20),c.Ub(64,"label",21),c.Mc(65,"Attach Image"),c.Tb(),c.Ub(66,"input",22),c.cc("change",function(t){return e.onImageChange(t)}),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(67,"div",6),c.Kc(68,E,13,1,"mat-card",23),c.Ub(69,"div",24),c.Kc(70,$,3,0,"button",25),c.Kc(71,R,3,3,"button",26),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Cb(1),c.oc("ngIf",!e.editMode),c.Cb(1),c.oc("ngIf",e.editMode),c.Cb(2),c.oc("routerLink","/admin/users/list"),c.Cb(4),c.oc("formGroup",e.dataForm),c.Cb(27),c.oc("ngForOf",e.groups),c.Cb(5),c.oc("value",1),c.Cb(2),c.oc("value",0),c.Cb(6),c.oc("value",1),c.Cb(2),c.oc("value",0),c.Cb(12),c.oc("ngIf",e.dataForm.controls.image.value),c.Cb(6),c.oc("ngIf",e.files),c.Cb(2),c.oc("ngIf",e.submitted),c.Cb(1),c.oc("ngIf",!e.submitted))},directives:[n.l,m.a,i.h,d.a,l.b,P.w,P.r,P.j,I.a,I.c,I.e,I.b,k.b,k.e,F.b,P.d,P.q,P.i,D.a,n.k,S.o,m.b],styles:["mat-card[_ngcontent-%COMP%]     .mat-card-header-text{margin:0}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]     .mat-form-field-infix{padding:10px 0}.long_lbl[_ngcontent-%COMP%]     .mat-form-field-infix{padding:15px 0}.form-add[_ngcontent-%COMP%]{display:inline-block;margin-top:20px}.form-add[_ngcontent-%COMP%], .form-add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.profile_image[_ngcontent-%COMP%]{display:inline-block;width:200px;height:auto;border-radius:5px}.flist[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 10px;display:inline-block}.flist[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:4px;margin-bottom:10px;padding:0 20px}.flist[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{font-weight:700;min-width:150px;display:inline-block}"]}),t})();const J=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:O},{path:":id",component:V},{path:"add",component:V}];let G=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(J)],i.i]}),t})();var H=a("jAig"),z=a("p8Kd");let W=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[n.c,G,H.a,z.a,P.l,P.u]]}),t})()}}]);