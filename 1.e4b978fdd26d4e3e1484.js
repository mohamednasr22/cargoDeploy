(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{DejY:function(t,e,i){"use strict";i.d(e,"a",function(){return h}),i.d(e,"b",function(){return l});var n=i("8Y7J"),s=i("UhP/"),a=i("wd/R");const o=i.n(a).a||a,r=new n.s("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function c(t,e){const i=Array(t);for(let n=0;n<t;n++)i[n]=e(n);return i}let l=(()=>{class t extends s.c{constructor(t,e){super(),this._options=e,this.setLocale(t||o.locale())}setLocale(t){super.setLocale(t);let e=o.localeData(t);this._localeData={firstDayOfWeek:e.firstDayOfWeek(),longMonths:e.months(),shortMonths:e.monthsShort(),dates:c(31,t=>this.createDate(2017,0,t+1).format("D")),longDaysOfWeek:e.weekdays(),shortDaysOfWeek:e.weekdaysShort(),narrowDaysOfWeek:e.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,e,i){const n=this._createMoment({year:t,month:e,date:i}).locale(this.locale);return n.isValid(),n}today(){return this._createMoment().locale(this.locale)}parse(t,e){return t&&"string"==typeof t?this._createMoment(t,e,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,e){return t=this.clone(t),this.isValid(t),t.format(e)}addCalendarYears(t,e){return this.clone(t).add({years:e})}addCalendarMonths(t,e){return this.clone(t).add({months:e})}addCalendarDays(t,e){return this.clone(t).add({days:e})}toIso8601(t){return this.clone(t).format()}deserialize(t){let e;if(t instanceof Date)e=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;e=this._createMoment(t,o.ISO_8601).locale(this.locale)}return e&&this.isValid(e)?this._createMoment(e).locale(this.locale):super.deserialize(t)}isDateInstance(t){return o.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return o.invalid()}_createMoment(t,e,i){const{strict:n,useUtc:s}=this._options||{};return s?o.utc(t,e,i,n):o(t,e,i,n)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(s.f,8),n.Yb(r,8))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac}),t})();const h={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},KwLF:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("AytR"),s=i("lJxs"),a=i("8Y7J"),o=i("IheW");let r=(()=>{class t{constructor(t){this.http=t}getInvoices(t={}){return this.http.get(n.a.apiUrl+"/invoice/list",{params:t}).pipe(Object(s.a)(t=>t))}saveInvoice(t){return this.http.post(n.a.apiUrl+"/invoice/save",t,{observe:"events",reportProgress:!0})}getInvoice(t){return this.http.post(n.a.apiUrl+"/invoice/get",t)}deleteInvoice(t){return this.http.post(n.a.apiUrl+"/invoice/delete",t)}getInvoiceHistory(t){return this.http.post(n.a.apiUrl+"/invoice/history",t)}getInvoiceFiles(t){return this.http.post(n.a.apiUrl+"/invoice/files",t)}saveInvoiceFiles(t){return this.http.post(n.a.apiUrl+"/invoice/savefiles",t,{observe:"events",reportProgress:!0})}deleteInvoiceFile(t){return this.http.post(n.a.apiUrl+"/invoice/deletefile",t)}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(o.b))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},M6PE:function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("AytR"),s=i("lJxs"),a=i("8Y7J"),o=i("IheW");let r=(()=>{class t{constructor(t){this.http=t}getBulk(){return this.http.get(n.a.apiUrl+"/shipment/bulk",{}).pipe(Object(s.a)(t=>t))}getShipments(t={}){return this.http.get(n.a.apiUrl+"/shipment/list",{params:t}).pipe(Object(s.a)(t=>t))}getShippers(){return this.http.get(n.a.apiUrl+"/shipper/list",{}).pipe(Object(s.a)(t=>t))}getReceivers(){return this.http.get(n.a.apiUrl+"/receiver/list",{}).pipe(Object(s.a)(t=>t))}updateHistoryItem(t){return this.http.post(n.a.apiUrl+"/shipment/updatehistoryitem",t,{observe:"events",reportProgress:!0})}downloadHistoryItem(t){return this.http.post(n.a.apiUrl+"/shipment/downloadgallery",t)}deleteHistoryItem(t){return this.http.post(n.a.apiUrl+"/shipment/deletehistoryitem",t)}saveShipment(t){return this.http.post(n.a.apiUrl+"/shipment/save",t,{observe:"events",reportProgress:!0})}saveShipmentNotes(t){return this.http.post(n.a.apiUrl+"/shipment/savenote",t)}getShipment(t){return this.http.post(n.a.apiUrl+"/shipment/get",t)}getShipmentHistory(t){return this.http.post(n.a.apiUrl+"/shipment/history",t)}getShipmentFiles(t){return this.http.post(n.a.apiUrl+"/shipment/files",t)}saveShipmentFiles(t){return this.http.post(n.a.apiUrl+"/shipment/savefiles",t,{observe:"events",reportProgress:!0})}deleteShipmentFile(t){return this.http.post(n.a.apiUrl+"/shipment/deletefile",t)}deleteShipment(t){return this.http.post(n.a.apiUrl+"/shipment/delete",t)}}return t.\u0275fac=function(e){return new(e||t)(a.Yb(o.b))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Sftj:function(t,e,i){"use strict";i.d(e,"a",function(){return k});var n=i("iELJ"),s=i("IheW"),a=i("8Y7J"),o=i("zHaW"),r=i("s7LF"),c=i("M6PE"),l=i("I1pp"),h=i("KwLF"),d=i("Tj54"),p=i("SqCe"),u=i("SVse"),m=i("Dxy4"),b=i("pu8Q"),f=i("UhP/");function g(t,e){1&t&&a.Pb(0,"mat-progress-spinner",9)}function v(t,e){if(1&t){const t=a.Vb();a.Ub(0,"div",10),a.Ub(1,"span",11),a.Mc(2),a.Tb(),a.Ub(3,"span"),a.Mc(4),a.Ub(5,"a",12),a.Ub(6,"mat-icon"),a.Mc(7,"cloud_download"),a.Tb(),a.Tb(),a.Ub(8,"a",12),a.Ub(9,"mat-icon"),a.Mc(10,"remove_red_eye"),a.Tb(),a.Tb(),a.Ub(11,"button",13),a.cc("click",function(){a.Ac(t);const i=e.$implicit;return a.gc().deleteFile(i.file_id)}),a.Ub(12,"mat-icon"),a.Mc(13,"delete"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=e.$implicit;a.Cb(2),a.Nc(t.image_name),a.Cb(2),a.Oc("",t.date_added," "),a.Cb(1),a.oc("href",t.codepath,a.Dc),a.Cb(3),a.oc("href",t.file,a.Dc)}}function _(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"button",14),a.cc("click",function(){return a.Ac(t),a.gc().submitForm()}),a.Mc(2),a.Tb(),a.Rb()}if(2&t){const t=a.gc();a.Cb(2),a.Oc("Upload ",t.filename,"")}}function y(t,e){if(1&t){const t=a.Vb();a.Sb(0),a.Ub(1,"label",15),a.Ub(2,"mat-icon",1),a.Mc(3,"add"),a.Tb(),a.Mc(4," Add New Attachment "),a.Tb(),a.Ub(5,"input",16),a.cc("change",function(e){return a.Ac(t),a.gc().onFileChange(e)}),a.Tb(),a.Rb()}}let k=(()=>{class t{constructor(t,e,i,n,s,a,o){if(this.dialogRef=t,this.data=e,this._snackBar=i,this.fb=n,this.shipmentService=s,this.containerService=a,this.invoiceService=o,this.dataFiles=[],this.submitted=!1,this.percentCompleted=0,this.isUploaded=!1,this.filename="",this.ready=!1,this.loaded=!1,this.dataFiles=[],this.ready=!1,this.dataForm=this.fb.group({files:this.fb.group({file:[""]})}),this.data.shipment_id){this.loaded=!1;let t=new FormData;t.append("shipment_id",this.data.shipment_id),this.shipmentService.getShipmentFiles(t).subscribe(t=>{if(t)for(let e=0;e<t.data.length;e++)this.dataFiles.push(t.data[e]);this.loaded=!0},t=>{this.loaded=!0})}else if(this.data.container_id){let t=new FormData;t.append("container_id",this.data.container_id),this.containerService.getContainerFiles(t).subscribe(t=>{if(t)for(let e=0;e<t.data.length;e++)this.dataFiles.push(t.data[e]);this.loaded=!0},t=>{this.loaded=!0})}else if(this.data.invoice_id){let t=new FormData;t.append("invoice_id",this.data.invoice_id),this.invoiceService.getInvoiceFiles(t).subscribe(t=>{if(t)for(let e=0;e<t.data.length;e++)this.dataFiles.push(t.data[e]);this.loaded=!0},t=>{this.loaded=!0})}}ngOnInit(){}onFileChange(t){this.ready=!0,this.dataForm.get("files").get("file").setValue(t.target.files[0]),this.filename=this.dataForm.value.files.file.name}submitForm(){this.submitted=!0;let t=new FormData,e=JSON.parse(JSON.stringify(this.dataForm.value));e.files.file=this.dataForm.get("files").get("file").value,this.jsonToFormData(t,e),this.data.shipment_id?(t.append("shipment_id",this.data.shipment_id.toString()),this.shipmentService.saveShipmentFiles(t).subscribe(t=>{t.type===s.d.UploadProgress?this.percentCompleted=Math.round(100*t.loaded/t.total):t instanceof s.e&&(this.isUploaded=!0,this.submitted=!1,this.onNoClick(),this.openSnackBar("Data submited successfully",""),console.log("success"))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")})):this.data.container_id?(t.append("container_id",this.data.container_id.toString()),this.containerService.saveContainerFiles(t).subscribe(t=>{t.type===s.d.UploadProgress?this.percentCompleted=Math.round(100*t.loaded/t.total):t instanceof s.e&&(this.isUploaded=!0,this.submitted=!1,this.onNoClick(),this.openSnackBar("Data submited successfully",""),console.log("success"))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")})):this.data.invoice_id&&(t.append("invoice_id",this.data.invoice_id.toString()),this.invoiceService.saveInvoiceFiles(t).subscribe(t=>{t.type===s.d.UploadProgress?this.percentCompleted=Math.round(100*t.loaded/t.total):t instanceof s.e&&(this.isUploaded=!0,this.submitted=!1,this.onNoClick(),this.openSnackBar("Data submited successfully",""),console.log("success"))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")}))}deleteFile(t){console.log(t),this.submitted=!0;let e=new FormData;e.append("file_id",t.toString()),this.data.shipment_id?(e.append("shipment_id",this.data.shipment_id.toString()),this.shipmentService.deleteShipmentFile(e).subscribe(t=>{t&&(this.submitted=!1,this.onNoClick(),this.openSnackBar("File deleted successfully",""))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")})):this.data.container_id?(e.append("container_id",this.data.container_id.toString()),this.containerService.deleteContainerFile(e).subscribe(t=>{t&&(this.submitted=!1,this.onNoClick(),this.openSnackBar("File deleted successfully",""))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")})):this.data.invoice_id&&(e.append("invoice_id",this.data.invoice_id.toString()),this.invoiceService.deleteInvoiceFile(e).subscribe(t=>{t&&(this.submitted=!1,this.onNoClick(),this.openSnackBar("File deleted successfully",""))},t=>{this.submitted=!1,this.onNoClick(),this.openSnackBar("Something wrong happen!",""),console.log("error")}))}openSnackBar(t,e){this._snackBar.open(t,e,{duration:2e3})}buildFormData(t,e,i){!e||"object"!=typeof e||e instanceof Date||e instanceof File?t.append(i,null==e?"":e):Object.keys(e).forEach(n=>{this.buildFormData(t,e[n],i?`${i}[${n}]`:n)})}jsonToFormData(t,e){this.buildFormData(t,e,"")}onNoClick(){this.ready=!0,this.dataFiles=[],this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(n.g),a.Ob(n.a),a.Ob(o.a),a.Ob(r.f),a.Ob(c.a),a.Ob(l.a),a.Ob(h.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-files"]],decls:13,vars:4,consts:[["mat-dialog-title","",1,"pop_header"],["mat-list-icon",""],["mat-dialog-content",""],[1,"files_list"],["class","loader_spinner","color","primary","mode","indeterminate",4,"ngIf"],["class","item",4,"ngFor","ngForOf"],["mat-dialog-actions",""],[4,"ngIf"],["mat-button","",3,"click"],["color","primary","mode","indeterminate",1,"loader_spinner"],[1,"item"],[1,"filename"],["target","_blank",3,"href"],["mat-icon-button","","aria-label","delete",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-ripple","","for","inp_excel",1,"cs-dlnk2"],["type","file","id","inp_excel","accept",".txt, .pdf,.doc,.docx,.zip",2,"display","none",3,"change"]],template:function(t,e){1&t&&(a.Ub(0,"h2",0),a.Ub(1,"mat-icon",1),a.Mc(2,"attach_file"),a.Tb(),a.Mc(3," Attached Files"),a.Tb(),a.Ub(4,"div",2),a.Ub(5,"div",3),a.Kc(6,g,1,0,"mat-progress-spinner",4),a.Kc(7,v,14,4,"div",5),a.Tb(),a.Tb(),a.Ub(8,"div",6),a.Kc(9,_,3,1,"ng-container",7),a.Kc(10,y,6,0,"ng-container",7),a.Ub(11,"button",8),a.cc("click",function(){return e.onNoClick()}),a.Mc(12,"Close"),a.Tb(),a.Tb()),2&t&&(a.Cb(6),a.oc("ngIf",!e.loaded),a.Cb(1),a.oc("ngForOf",e.dataFiles),a.Cb(2),a.oc("ngIf",e.ready),a.Cb(1),a.oc("ngIf",!e.ready))},directives:[n.h,d.a,p.b,n.e,u.l,u.k,n.c,m.b,b.a,f.t],styles:[".item[_ngcontent-%COMP%]{background:#fbfbfb;border-radius:4px;border:1px solid #ececec;margin-bottom:10px;padding:10px;display:inline-block;width:100%}.item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{display:block}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{display:inline-block;padding-right:50px;vertical-align:bottom;padding-top:10px;font-weight:700}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type   a[_ngcontent-%COMP%]{padding:9px;float:left;display:inline-block}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(2){float:right}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(2)   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;display:inline-block;vertical-align:middle;padding:3px;line-height:1}.item[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.files_list[_ngcontent-%COMP%]{width:500px}.loader_spinner[_ngcontent-%COMP%]{margin:20px auto}"]}),t})()}}]);